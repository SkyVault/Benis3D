#ifndef SKY_MAIN_MENU_H
#define SKY_MAIN_MENU_H

#include <raylib.h>
#include <stdlib.h>

#include "game_types.h"
#include "gui.h"
#include "assets.h"
#include "renderer.h"
#include "particles.h"
#include "scene.h"

#define FIRE_WIDTH (1280 / 4)
#define FIRE_HEIGHT (96)

static const int rgbs[] = {
    0x07, 0x07, 0x07, 0x1F, 0x07, 0x07, 0x2F, 0x0F, 0x07, 0x47, 0x0F, 0x07,
    0x57, 0x17, 0x07, 0x67, 0x1F, 0x07, 0x77, 0x1F, 0x07, 0x8F, 0x27, 0x07,
    0x9F, 0x2F, 0x07, 0xAF, 0x3F, 0x07, 0xBF, 0x47, 0x07, 0xC7, 0x47, 0x07,
    0xDF, 0x4F, 0x07, 0xDF, 0x57, 0x07, 0xDF, 0x57, 0x07, 0xD7, 0x5F, 0x07,
    0xD7, 0x5F, 0x07, 0xD7, 0x67, 0x0F, 0xCF, 0x6F, 0x0F, 0xCF, 0x77, 0x0F,
    0xCF, 0x7F, 0x0F, 0xCF, 0x87, 0x17, 0xC7, 0x87, 0x17, 0xC7, 0x8F, 0x17,
    0xC7, 0x97, 0x1F, 0xBF, 0x9F, 0x1F, 0xBF, 0x9F, 0x1F, 0xBF, 0xA7, 0x27,
    0xBF, 0xA7, 0x27, 0xBF, 0xAF, 0x2F, 0xB7, 0xAF, 0x2F, 0xB7, 0xB7, 0x2F,
    0xB7, 0xB7, 0x37, 0xCF, 0xCF, 0x6F, 0xDF, 0xDF, 0x9F, 0xEF, 0xEF, 0xC7,
    0xFF, 0xFF, 0xFF};

#define NUM_RGBS (sizeof(rgbs) / sizeof(rgbs[0]))

typedef struct {
    Game *game;

    bool do_controls_modal;
    bool do_exit_modal;

    int fire_pixels[FIRE_WIDTH * FIRE_HEIGHT];
    Color palette[NUM_RGBS / 3];
    RenderTexture2D target;
} MainMenuState;

void main_menu_function(void *data, int state);

#endif//SKY_MAIN_MENU_H
